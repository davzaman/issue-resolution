# Save system info, ala sourcecode snapshots

https://github.com/guildai/guildai/issues/42

## Problem

As of guildai<=0.6.6.dev2

Guild does not provide complete or near-complete information on the
system for a rule.

Guild does provide a `platform` attribute, e.g.:

```
architecture: '64bit '
cpus: 12
processor: x86_64
python_version: 2.7.15+ (default, Nov 27 2018, 23:36:35) [GCC 7.3.0]
uname: 'Linux dakota 4.15.0-55-generic #60-Ubuntu SMP Tue Jul 2 18:22:20 UTC 2019
  x86_64 x86_64'
```

What's missing:

- Language module info (e.g. info generated by `pip freeze`)
- Support for custom system metrics (i.e. what the user says it system
  info for a model or operation)
- Ability to view or easily compare system info

## Request

Guild should formalize "system info" in a way similar to that of
"sourcecode".

- Display a digest for "system" in Compare and runs info
- Support easy diffing of system changes - e.g. `guild diff --system`
- Support custom system attributes via Guild file

## Approach

Guild should store "system" info under `RUN_DIR/.guild/system`. This
should include platform details (e.g. `.guild/system/platform`) and
pip freeze output (for Python scripts -
e.g. `.guild/system/python_packages`).

With this information, Guild should generate a digest for the files
under `.guild/system` using the same method it uses for source code
(i.e. files under `.guild/sourcecode`).

Guild should provide a `--system` option to the `diff`, `open`, and
`cat` commands (following the pattern established with `--sourcecode`
options).

Guild should include a `system` column in Compare.

```
run       operation  started              time     status     label  sourcecode  system    step  accuracy
456e4219  train      2019-08-06 08:32:41  0:00:00  completed         784ba0e9    8c189e1b  2     0.567000
12b605aa  train      2019-08-06 08:23:50  0:00:00  completed         784ba0e9    3aa9a21e  2     0.567000
7b7ee1f3  train      2019-08-06 08:14:33  0:00:00  completed         991c3ccf    3aa9a21e  2     0.456000
```

This begs the question, what changed betwen the last two runs at the system level?

This can be answerd by running:

    $ guild diff --system 12b605aa 456e4219

## Related Issues

- [Hash of source code in compare](../issue-41)
